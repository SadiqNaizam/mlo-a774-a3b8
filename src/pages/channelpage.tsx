import React, { useState } from 'react';

// Custom Layout Components
import Header from '@/components/layout/Header';
import Sidebar from '@/components/layout/Sidebar';
import Footer from '@/components/layout/Footer';

// Custom Page-Specific Components
import ChannelHeader from '@/components/ChannelHeader';
import VideoThumbnailItem from '@/components/VideoThumbnailItem';

// Shadcn/ui Components
import { ScrollArea } from '@/components/ui/scroll-area';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

// Lucide Icons for placeholders
import { ListVideo, Users, Info, Video as VideoIcon } from 'lucide-react'; // Renamed Video to VideoIcon to avoid conflict
import { cn } from '@/lib/utils';

// Sample Data
const channelData = {\n  channelName: \"TechVisionary\",\n  subscriberCount: 2150000,\n  avatarImageUrl: \"https://images.unsplash.com/photo-1527980965255-d3b416303d12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8YXZhdGFyfGVufDB8fDB8fHww&auto=format&fit=facearea&facepad=2&w=128&h=128&q=80\",\n  bannerImageUrl: \"https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dGVjaG5vbG9neSUyMGJhbm5lcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=1200&h=300\",\n  initialIsSubscribed: false,\n  description: `Welcome to the official channel of TechVisionary! We are dedicated to bringing you the latest\nand greatest in technology, innovation, and future trends. Our mission is to explore the cutting edge,\ndemystify complex topics, and inspire a new generation of thinkers and creators.\n\nJoin us as we delve into topics like artificial intelligence, quantum computing, sustainable tech,\ngadget reviews, and much more. We upload new videos every week, so make sure to subscribe and hit the\nnotification bell so you don't miss out!`,\n  joinDate: \"January 15, 2020\",\n  totalVideosEstimate: 120,\n  totalViewsEstimate: \"75 Million+\",\n  socialLinks: {\n    twitter: \"TechVisionaryHQ\",\n    instagram: \"TechVisionaryOfficial\"\n  }\n};\n\nconst sampleVideos = [\n  {\n    videoId: 'vid001',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1518770660439-4636190af475?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8dGVjaG5vbG9neXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '12:35',\n    title: 'The Future of Quantum Computing: A Deep Dive',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '2.1M views',\n    uploadDate: '3 days ago',\n  },\n  {\n    videoId: 'vid002',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dGVjaG5vbG9neXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '08:17',\n    title: 'Unboxing the Latest Gadgets of 2024',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '850K views',\n    uploadDate: '1 week ago',\n  },\n  {\n    videoId: 'vid003',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1550745165-9bc0b252726c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8dGVjaG5vbG9neXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '15:02',\n    title: 'AI in Everyday Life: Transforming Our World',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '1.2M views',\n    uploadDate: '2 weeks ago',\n  },\n  {\n    videoId: 'vid004',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1605647540924-852290f6b0d5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fHZirtualJTIwcmVhbGl0eXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '22:10',\n    title: 'Exploring Virtual Reality: Beyond Gaming',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '975K views',\n    uploadDate: '1 month ago',\n  },\n  {\n    videoId: 'vid005',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGNvZGluZ3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '18:50',\n    title: 'Mastering Modern JavaScript: ES2023 Features',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '650K views',\n    uploadDate: '1 month ago',\n  },\n  {\n    videoId: 'vid006',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8c2NpZW5jZSUyMGxhYnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '25:00',\n    title: 'Breakthroughs in Renewable Energy Tech',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '1.9M views',\n    uploadDate: '2 months ago',\n  },\n   {\n    videoId: 'vid007',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1531297484001-80022131f5a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGVjaCUyMGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '09:30',\n    title: 'The Evolution of User Interface Design',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '450K views',\n    uploadDate: '3 months ago',\n  },\n  {\n    videoId: 'vid008',\n    thumbnailUrl: 'https://images.unsplash.com/photo-1593642702821-c8da6758f0c6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8Y29tcHV0ZXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=320&h=180',\n    videoDuration: '14:22',\n    title: 'Building Your First Smart Home Automation System',\n    channelName: channelData.channelName,\n    channelAvatarUrl: channelData.avatarImageUrl,\n    viewCount: '780K views',\n    uploadDate: '4 months ago',\n  }\n];\n\nconst ChannelPage: React.FC = () => {\n  console.log('ChannelPage loaded');\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n\n  const handleSubscribeToggle = (isSubscribed: boolean) => {\n    console.log(`Channel subscription status for ${channelData.channelName} changed to: ${isSubscribed}`);\n    // In a real app, this would trigger an API call\n  };\n  \n  return (\n    <div className=\"flex flex-col min-h-screen bg-background text-foreground\">\n      <Header />\n      <div className=\"flex flex-1 pt-16\"> {/* pt-16 for fixed header height */}\n        <Sidebar isCollapsed={isSidebarCollapsed} onToggleCollapse={() => setIsSidebarCollapsed(!isSidebarCollapsed)} />\n        \n        <ScrollArea className={cn(\n          \"flex-1 transition-all duration-300 ease-in-out\",\n          isSidebarCollapsed ? \"md:pl-20\" : \"md:pl-64\"\n        )}>\n          <main className=\"container mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n            <ChannelHeader\n              channelName={channelData.channelName}\n              subscriberCount={channelData.subscriberCount}\n              avatarImageUrl={channelData.avatarImageUrl}\n              bannerImageUrl={channelData.bannerImageUrl}\n              initialIsSubscribed={channelData.initialIsSubscribed}\n              onSubscribeToggle={handleSubscribeToggle}\n            />\n\n            <Tabs defaultValue=\"videos\" className=\"mt-8 w-full\">\n              <TabsList className=\"flex border-b\">\n                <TabsTrigger value=\"videos\" className=\"px-4 py-2\">Videos</TabsTrigger>\n                <TabsTrigger value=\"playlists\" className=\"px-4 py-2\">Playlists</TabsTrigger>\n                <TabsTrigger value=\"community\" className=\"px-4 py-2\">Community</TabsTrigger>\n                <TabsTrigger value=\"about\" className=\"px-4 py-2\">About</TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"videos\" className=\"mt-6\">\n                {sampleVideos.length > 0 ? (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-6\">\n                    {sampleVideos.map((video) => (\n                      <VideoThumbnailItem\n                        key={video.videoId}\n                        videoId={video.videoId}\n                        thumbnailUrl={video.thumbnailUrl}\n                        videoDuration={video.videoDuration}\n                        title={video.title}\n                        channelName={video.channelName}\n                        channelAvatarUrl={video.channelAvatarUrl}\n                        viewCount={video.viewCount}\n                        uploadDate={video.uploadDate}\n                      />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"col-span-full flex flex-col items-center justify-center h-64 text-muted-foreground\">\n                    <VideoIcon className=\"w-16 h-16 mb-4 text-muted-foreground/70\" />\n                    <p className=\"text-xl font-semibold mb-2\">No Videos Uploaded Yet</p>\n                    <p className=\"text-sm\">This channel hasn't uploaded any videos.</p>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"playlists\" className=\"mt-6\">\n                <div className=\"flex flex-col items-center justify-center min-h-[300px] text-muted-foreground bg-muted/20 rounded-lg p-8\">\n                  <ListVideo className=\"w-16 h-16 mb-4 text-muted-foreground/70\" />\n                  <p className=\"text-xl font-semibold mb-2\">No Playlists Available</p>\n                  <p className=\"text-sm text-center max-w-xs\">\n                    This channel hasn't created any playlists yet. Check back later!\n                  </p>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"community\" className=\"mt-6\">\n                <div className=\"flex flex-col items-center justify-center min-h-[300px] text-muted-foreground bg-muted/20 rounded-lg p-8\">\n                  <Users className=\"w-16 h-16 mb-4 text-muted-foreground/70\" />\n                  <p className=\"text-xl font-semibold mb-2\">No Community Posts</p>\n                  <p className=\"text-sm text-center max-w-xs\">\n                    {channelData.channelName} hasn't shared any community posts recently.\n                  </p>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"about\" className=\"mt-6\">\n                <Card className=\"overflow-hidden\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center\">\n                        <Info className=\"w-5 h-5 mr-2 text-primary\" /> \n                        About {channelData.channelName}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"prose dark:prose-invert max-w-none text-sm leading-relaxed\">\n                    <p>{channelData.description}</p>\n                    <h3 className=\"text-base font-semibold mt-4 mb-1\">Channel Details</h3>\n                    <ul className=\"list-disc pl-5 space-y-0.5\">\n                      <li>Joined: {channelData.joinDate}</li>\n                      <li>Subscribers: {channelData.subscriberCount.toLocaleString()}</li>\n                      <li>Estimated Total Videos: {channelData.totalVideosEstimate}</li>\n                      <li>Estimated Total Views: {channelData.totalViewsEstimate}</li>\n                    </ul>\n                    {channelData.socialLinks && (\n                      <>\n                        <h3 className=\"text-base font-semibold mt-4 mb-1\">Follow Us</h3>\n                        <ul className=\"list-disc pl-5 space-y-0.5\">\n                          {channelData.socialLinks.twitter && <li>Twitter: <a href={`https://twitter.com/${channelData.socialLinks.twitter}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">@{channelData.socialLinks.twitter}</a></li>}\n                          {channelData.socialLinks.instagram && <li>Instagram: <a href={`https://instagram.com/${channelData.socialLinks.instagram}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">@{channelData.socialLinks.instagram}</a></li>}\n                        </ul>\n                      </>\n                    )}\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </main>\n          <Footer />\n        </ScrollArea>\n      </div>\n    </div>\n  );\n};\n\nexport default ChannelPage;